{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useContext, useState } from \"react\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nimport { signIn } from \"../Helpers/SignIn\";\nimport pageStyle from \"../Style/PagesStyle\";\nimport colors from \"../Style/Colors\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction SignInScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    login = _useState2[0],\n    setLogin = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useContext = useContext(TokenContext),\n    _useContext2 = _slicedToArray(_useContext, 2),\n    token = _useContext2[0],\n    setToken = _useContext2[1];\n  var _useContext3 = useContext(UsernameContext),\n    _useContext4 = _slicedToArray(_useContext3, 2),\n    user = _useContext4[0],\n    setUser = _useContext4[1];\n  var _useState5 = useState(\"\"),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var onSubmit = function onSubmit() {\n    if (login === \"\") {\n      setError(\"Empty username\");\n      return;\n    }\n    signIn(login, password).then(function (token) {\n      setError(\"\");\n      setToken(token);\n      setUser(login);\n      navigation.navigate(\"Home\");\n    }).catch(function (err) {\n      setError(err.message);\n    });\n  };\n  return _jsx(TokenContext.Consumer, {\n    children: function children(_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n        token = _ref3[0],\n        setToken = _ref3[1];\n      return _jsx(UsernameContext.Consumer, {\n        children: function children(_ref4) {\n          var _ref5 = _slicedToArray(_ref4, 2),\n            username = _ref5[0],\n            setUsername = _ref5[1];\n          return _jsxs(View, {\n            style: pageStyle.loginPage,\n            children: [_jsx(Image, {\n              style: pageStyle.sginInImage,\n              source: require(\"../assets/to-do-list.png\")\n            }), _jsxs(View, {\n              children: [_jsxs(View, {\n                children: [_jsxs(Text, {\n                  style: pageStyle.textSignIn,\n                  children: [\"Bienvenue sur la page de connexion :\", \" \"]\n                }), _jsx(TextInput, {\n                  style: pageStyle.inputStyle,\n                  placeholder: \"Username\",\n                  onChangeText: function onChangeText(text) {\n                    return setLogin(text);\n                  },\n                  value: login\n                })]\n              }), _jsx(View, {\n                children: _jsx(TextInput, {\n                  style: pageStyle.inputStyle,\n                  placeholder: \"Password\",\n                  onChangeText: function onChangeText(text) {\n                    return setPassword(text);\n                  },\n                  secureTextEntry: true,\n                  value: password\n                })\n              })]\n            }), _jsxs(View, {\n              style: pageStyle.buttonLogin,\n              children: [_jsx(Button, {\n                title: \"Sign in\",\n                color: colors.buttons,\n                onPress: onSubmit\n              }), _jsx(Text, {\n                style: pageStyle.errorText,\n                children: error\n              })]\n            })]\n          });\n        }\n      });\n    }\n  });\n}\nexport default SignInScreen;","map":{"version":3,"names":["React","useContext","useState","TextInput","Button","View","Text","Image","TokenContext","UsernameContext","signIn","pageStyle","colors","jsx","_jsx","jsxs","_jsxs","SignInScreen","_ref","navigation","_useState","_useState2","_slicedToArray","login","setLogin","_useState3","_useState4","password","setPassword","_useContext","_useContext2","token","setToken","_useContext3","_useContext4","user","setUser","_useState5","_useState6","error","setError","onSubmit","then","navigate","catch","err","message","Consumer","children","_ref2","_ref3","_ref4","_ref5","username","setUsername","style","loginPage","sginInImage","source","require","textSignIn","inputStyle","placeholder","onChangeText","text","value","secureTextEntry","buttonLogin","title","color","buttons","onPress","errorText"],"sources":["/home/kabar231/Documents/Kabar-Mansous/reactProject/Screen/SignInScreen.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport { TextInput, Button, View, Text, Image } from \"react-native-web\";\nimport { TokenContext, UsernameContext } from \"../Context/Context\";\nimport { signIn } from \"../Helpers/SignIn\";\nimport pageStyle from \"../Style/PagesStyle\";\nimport colors from \"../Style/Colors\";\n//function that renders the signin screen\nfunction SignInScreen({ navigation }) {\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [token, setToken] = useContext(TokenContext);\n  const [user, setUser] = useContext(UsernameContext);\n  const [error, setError] = useState(\"\");\n//function that generated the token/user for a new user from the server and sets it with the token context/ user context\n  const onSubmit = () => {\n    if (login === \"\") {\n      setError(\"Empty username\");\n      return;\n    }\n    signIn(login, password)\n      .then((token) => {\n        setError(\"\");\n        setToken(token);\n        setUser(login);\n        navigation.navigate(\"Home\");\n      })\n      .catch((err) => {\n        setError(err.message);\n      });\n  };\n//rendering UI\n  return (\n    <TokenContext.Consumer>\n      {([token, setToken]) => (\n        <UsernameContext.Consumer>\n          {([username, setUsername]) => (\n            <View style={pageStyle.loginPage}>\n              <Image\n                style={pageStyle.sginInImage}\n                source={require(\"../assets/to-do-list.png\")}\n              />\n              <View>\n                <View>\n                  <Text style={pageStyle.textSignIn}>\n                    Bienvenue sur la page de connexion :{\" \"}\n                  </Text>\n                  <TextInput\n                    style={pageStyle.inputStyle}\n                    placeholder=\"Username\"\n                    onChangeText={(text) => setLogin(text)}\n                    value={login}\n                  />\n                </View>\n                <View>\n                  <TextInput\n                    style={pageStyle.inputStyle}\n                    placeholder=\"Password\"\n                    onChangeText={(text) => setPassword(text)}\n                    secureTextEntry={true}\n                    value={password}\n                  />\n                </View>\n              </View>\n              <View style={pageStyle.buttonLogin}>\n                <Button\n                  title=\"Sign in\"\n                  color={colors.buttons}\n                  onPress={onSubmit}\n                />\n                <Text style={pageStyle.errorText}>{error}</Text>\n              </View>\n            </View>\n          )}\n        </UsernameContext.Consumer>\n      )}\n    </TokenContext.Consumer>\n  );\n}\n\nexport default SignInScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}